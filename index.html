<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç§‹æ‹›ç®€å†åˆ¶ä½œå·¥å…·</title>
  <style>
    /* å…¨å±€æ ·å¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "å¾®è½¯é›…é»‘", "Microsoft YaHei", "è‹¹æ–¹", "PingFang SC", sans-serif;
      background-color: #f5f5f5;
      color: #333;
      overflow-x: hidden;
    }

    /* ç®€å†é¢„è§ˆåŒºæ ·å¼ */
    #resume-preview h1, #resume-preview h2, #resume-preview h3, #resume-preview h4, 
    #resume-preview p, #resume-preview li, #resume-preview span, #resume-preview td {
      font-family: "å¾®è½¯é›…é»‘", "Microsoft YaHei", "è‹¹æ–¹", "PingFang SC", sans-serif !important;
    }
    #resume-preview h2 {
      font-size: 1.4em !important;
      margin-bottom: 4px !important;
      margin-top: 7px !important;
    }
    #resume-preview h3 {
      font-size: 1.2em !important;
      margin-bottom: 1px !important;
      margin-top: 4px !important;
    }
    #resume-preview h4 {
      font-size: 1.1em !important;
      margin-bottom: 1px !important;
      margin-top: 1px !important;
    }
    #resume-preview p, #resume-preview li, #resume-preview span {
      font-size: 0.95em !important;
      line-height: 1.25 !important;
      margin-bottom: 2px !important;
      margin-top: 2px !important;
    }
    #resume-preview ul {
      margin-top: 3px !important;
      margin-bottom: 3px !important;
      padding-top: 0 !important;
    }
    #resume-preview strong {
      font-weight: 550;
    }

    /* é¡¶éƒ¨å¯¼èˆªæ  */
    .header {
      background: linear-gradient(135deg, #6aa0f0, #8aadf4);
      color: white;
      padding: 15px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .header-content {
      max-width: 1600px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-title {
      font-size: 1.5em;
      font-weight: 600;
    }

    .version-control {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .version-select {
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      background: white;
      color: #333;
      font-size: 14px;
      min-width: 150px;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: #4CAF50;
      color: white;
    }

    .btn-primary:hover {
      background: #45a049;
      transform: translateY(-1px);
    }

    .btn-success {
      background: #2196F3;
      color: white;
    }

    .btn-success:hover {
      background: #1976D2;
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: #FF9800;
      color: white;
    }

    .btn-secondary:hover {
      background: #F57C00;
      transform: translateY(-1px);
    }

    /* ä¸»å®¹å™¨ - ç¡®ä¿å·¦å³å¸ƒå±€ */
    .container {
      max-width: 1600px;
      margin: 20px auto;
      padding: 0 20px;
      display: flex;
      flex-direction: row !important; /* å¼ºåˆ¶æ°´å¹³å¸ƒå±€ */
      gap: 20px;
      height: calc(100vh - 120px);
      min-height: 600px;
      align-items: stretch;
      box-sizing: border-box;
    }

    /* ç¼–è¾‘åŒº - å›ºå®šå®½åº¦ï¼Œå·¦ä¾§ */
    .editor {
      flex: 0 0 450px !important; /* å¼ºåˆ¶å›ºå®šå®½åº¦ */
      width: 450px;
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      overflow-y: auto;
      overflow-x: hidden;
      height: 100%;
      min-height: 0;
      position: relative;
      box-sizing: border-box;
    }

    .module {
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }

    .module:last-child {
      border-bottom: none;
    }

    .module-title {
      color: #6aa0f0;
      font-size: 1.3em;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .form-input, .form-textarea {
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      font-family: inherit;
      transition: border-color 0.3s ease;
    }

    .form-input:focus, .form-textarea:focus {
      outline: none;
      border-color: #6aa0f0;
      box-shadow: 0 0 0 3px rgba(106, 160, 240, 0.1);
    }

    .form-textarea {
      min-height: 80px;
      resize: vertical;
    }

    .tip {
      font-size: 12px;
      color: #666;
      font-style: italic;
      margin-top: -8px;
    }

    /* æ™ºèƒ½è§£ææ ·å¼ */
    #smart-input {
      background: linear-gradient(135deg, #f8f9ff, #fff);
      border: 2px dashed #6aa0f0;
      border-radius: 12px;
      padding: 20px;
      font-size: 14px;
      line-height: 1.6;
      color: #555;
      transition: all 0.3s ease;
    }

    #smart-input:focus {
      border-style: solid;
      background: white;
      box-shadow: 0 0 0 3px rgba(106, 160, 240, 0.1);
    }

    #smart-input::placeholder {
      color: #999;
      font-style: italic;
    }

    .btn-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    /* æŠ€èƒ½åˆ—è¡¨ */
    .skill-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .skill-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      background: #f8f9fa;
      border-radius: 6px;
      border-left: 4px solid #6aa0f0;
    }

    .skill-content {
      flex: 1;
    }

    .skill-type {
      font-weight: 600;
      color: #333;
    }

    .skill-details {
      color: #666;
      font-size: 13px;
      margin-top: 2px;
    }

    .delete-btn {
      background: #ff4757;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 12px;
    }

    .delete-btn:hover {
      background: #ff3742;
    }

    /* é¡¹ç›®åˆ—è¡¨ */
    .project-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .project-item {
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #8aadf4;
      position: relative;
    }

    .project-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }

    .project-title {
      font-weight: 600;
      color: #333;
      font-size: 16px;
    }

    .project-details {
      font-size: 13px;
      color: #666;
      line-height: 1.4;
    }

    /* é¢„è§ˆåŒº - è‡ªé€‚åº”å®½åº¦ï¼Œå³ä¾§ */
    .preview {
      flex: 1 !important; /* å¼ºåˆ¶å æ®å‰©ä½™ç©ºé—´ */
      min-width: 0;
      background: white;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      overflow-y: auto;
      overflow-x: hidden;
      height: 100%;
      min-height: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      box-sizing: border-box;
    }

    .resume-preview {
      width: 100%;
      max-width: 800px;
      min-height: 800px;
      padding: 30px;
      background: white;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      border-radius: 8px;
      font-size: 14px;
      margin: 0 auto;
      position: relative;
      box-sizing: border-box;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 1200px) {
      .container {
        flex-direction: column;
        height: auto;
        min-height: auto;
        gap: 15px;
      }
      
      .editor {
        flex: none;
        width: 100%;
        height: auto;
        max-height: 500px;
      }
      
      .preview {
        flex: none;
        height: 600px;
        min-height: 600px;
      }
      
      .resume-preview {
        padding: 20px;
        font-size: 13px;
        max-width: 100%;
      }
    }

    /* ç¡®ä¿åœ¨å¤§å±å¹•ä¸Šå·¦å³å¸ƒå±€æ­£å¸¸ */
    @media (min-width: 1201px) {
      .container {
        flex-direction: row !important;
      }
      
      .editor {
        flex: 0 0 450px !important;
        width: 450px !important;
      }
      
      .preview {
        flex: 1 !important;
        min-width: 0 !important;
      }
    }

    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 15px;
      }
      
      .version-control {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .container {
        padding: 0 10px;
        gap: 15px;
      }
      
      .editor {
        padding: 15px;
      }
      
      .preview {
        padding: 10px;
        height: 500px;
      }
      
      .resume-preview {
        padding: 15px;
        font-size: 13px;
      }
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <header class="header">
    <div class="header-content">
      <h1 class="header-title">ğŸ¯ ç§‹æ‹›ç®€å†åˆ¶ä½œå·¥å…·</h1>
      <div class="version-control">
        <select id="version-select" class="version-select">
          <option value="">1.0ç‰ˆæœ¬</option>
        </select>
        <button id="save-version" class="btn btn-primary">ğŸ’¾ ä¿å­˜ç‰ˆæœ¬</button>
        <button id="export-pdf" class="btn btn-success">ğŸ“„ å¯¼å‡ºPDF</button>
        <button id="export-backup" class="btn btn-secondary">ğŸ“¦ å¯¼å‡ºå¤‡ä»½</button>
        <input type="file" id="import-backup" accept=".json" style="display: none;">
        <button id="import-backup-btn" class="btn btn-secondary">ğŸ“¥ å¯¼å…¥å¤‡ä»½</button>
      </div>
    </div>
  </header>

  <!-- æ ¸å¿ƒåŒé¢æ¿ -->
  <div class="container">
    <!-- å·¦ä¾§ç¼–è¾‘åŒº -->
    <div class="editor">
      <!-- æ™ºèƒ½è§£ææ¨¡å— -->
      <div class="module">
        <h3 class="module-title">ğŸ¤– æ™ºèƒ½è§£æ</h3>
        <div class="form-group">
          <textarea id="smart-input" placeholder="ç²˜è´´ä½ çš„ç®€å†ä¿¡æ¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å¹¶å¡«å……åˆ°å¯¹åº”å­—æ®µã€‚ä¾‹å¦‚ï¼š
Tullyï¼Œå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼ŒXXå¤§å­¦ç‰©è”ç½‘å·¥ç¨‹ä¸“ä¸šï¼Œ2022.09-2026.06ï¼Œè”ç³»æ–¹å¼ï¼š(+86) xxx-xxxx-xxxxï¼Œé‚®ç®±ï¼š2332486893@qq.comï¼ŒGitHubï¼šhttps://github.com/Tully-Lï¼Œä¸ªäººç½‘ç«™ï¼šhttps://tully.top/

æŠ€èƒ½ï¼šJavaScriptã€Reactã€Vueã€TypeScriptã€Node.jsã€MySQLã€Git

é¡¹ç›®ç»éªŒï¼š
1. äº¤äº’å¼æ ¡å›­ä¿¡æ¯å±•ç¤ºç½‘ç«™ (2025.07-2025.07)
   - æŠ€æœ¯æ ˆï¼šReactã€TypeScriptã€Three.jsã€Leaflet
   - åŠŸèƒ½ï¼š3Dåœ°çƒå¯è§†åŒ–ã€äº¤äº’å¼åœ°å›¾å¯¼èˆªã€å“åº”å¼è®¾è®¡
   - æˆæœï¼šæ—¥å‡è®¿é—®é‡50äººï¼Œé¡µé¢åŠ è½½é€Ÿåº¦æå‡30%

è£èª‰ï¼šCET-6ã€è“æ¡¥æ¯Webå¼€å‘ä¸‰ç­‰å¥–ã€è®¡ç®—æœºè®¾è®¡å¤§èµ›çœäºŒç­‰å¥–" class="form-textarea" style="min-height: 120px;"></textarea>
          <div class="btn-group">
            <button id="parse-text" class="btn btn-primary">ğŸ” æ™ºèƒ½è§£æ</button>
            <button id="load-demo" class="btn btn-success">ğŸ“‹ åŠ è½½ç¤ºä¾‹ç®€å†</button>
          </div>
          <span class="tip">ğŸ’¡ æ”¯æŒè‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å§“åã€æŠ€èƒ½ã€é¡¹ç›®ç­‰ä¿¡æ¯</span>
        </div>
      </div>

      <!-- åŸºç¡€ä¿¡æ¯æ¨¡å— -->
      <div class="module">
        <h3 class="module-title">ğŸ‘¤ åŸºç¡€ä¿¡æ¯</h3>
        <div class="form-group">
          <input type="text" id="name" placeholder="å§“åï¼ˆå¦‚ï¼šTullyï¼‰" class="form-input">
          <input type="text" id="job" placeholder="æ±‚èŒæ„å‘ï¼ˆå¦‚ï¼šå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼‰" class="form-input">
          <input type="text" id="education" placeholder="æ•™è‚²èƒŒæ™¯ï¼ˆå¦‚ï¼šxxå¤§å­¦ | ç‰©è”ç½‘å·¥ç¨‹ï¼ˆ2022.09â€”2026.06ï¼‰ï¼‰" class="form-input">
          <input type="text" id="courses" placeholder="ä¸»ä¿®è¯¾ç¨‹ï¼ˆå¦‚ï¼šWebå‰/åç«¯å¼€å‘æŠ€æœ¯ã€æ•°æ®ç»“æ„ä¸ç®—æ³•è®¾è®¡ï¼‰" class="form-input">
          <input type="text" id="contact" placeholder="è”ç³»æ–¹å¼ï¼ˆå¦‚ï¼š(+86) xxx-xxxx-xxxx | 2332486893@qq.comï¼‰" class="form-input">
          <input type="text" id="github" placeholder="Githubï¼ˆå¦‚ï¼šhttps://github.com/Tully-Lï¼‰" class="form-input">
          <input type="text" id="website" placeholder="ä¸ªäººç½‘ç«™ï¼ˆå¦‚ï¼šhttps://tully.top/ï¼‰" class="form-input">
        </div>
      </div>

      <!-- ä¸“ä¸šæŠ€èƒ½æ¨¡å— -->
      <div class="module">
        <h3 class="module-title">ğŸ› ï¸ ä¸“ä¸šæŠ€èƒ½</h3>
        <div class="form-group">
          <input type="text" id="skill-type" placeholder="æŠ€èƒ½ç±»åˆ«ï¼ˆå¦‚ï¼šå‰ç«¯å¼€å‘ï¼‰" class="form-input">
          <input type="text" id="skill-content" placeholder="æŠ€èƒ½å†…å®¹ï¼ˆå¦‚ï¼šJavaScriptã€CSS3ã€HTML5ã€TypeScriptï¼‰" class="form-input">
          <button id="add-skill" class="btn btn-primary">â• æ·»åŠ æŠ€èƒ½</button>
          <span class="tip">ğŸ’¡ ç§‹æ‹›å°è´´å£«ï¼šæŒ‰å²—ä½JDè°ƒæ•´æŠ€èƒ½é¡ºåºï¼Œå¦‚æŠ•é€’Reactå²—ï¼Œå°†Reactæ”¾åœ¨å‰ç«¯æ¡†æ¶ç¬¬ä¸€ä½</span>
          <div id="skill-list" class="skill-list"></div>
        </div>
      </div>

      <!-- é¡¹ç›®ç»éªŒæ¨¡å— -->
      <div class="module">
        <h3 class="module-title">ğŸŒŸ æ ¸å¿ƒé¡¹ç›®ç»éªŒ</h3>
        <div class="form-group">
          <input type="text" id="project-name" placeholder="é¡¹ç›®åç§°ï¼ˆå¦‚ï¼šäº¤äº’å¼æ ¡å›­ä¿¡æ¯å±•ç¤ºç½‘ç«™ï¼‰" class="form-input">
          <input type="text" id="project-time" placeholder="é¡¹ç›®æ—¶é—´ï¼ˆå¦‚ï¼š2025.07-2025.07ï¼‰" class="form-input">
          <input type="text" id="project-link" placeholder="é¡¹ç›®é“¾æ¥ï¼ˆå¦‚ï¼šhttps://greenpulsemap.com/ï¼‰" class="form-input">
          <input type="text" id="project-status" placeholder="é¡¹ç›®çŠ¶æ€ï¼ˆå¦‚ï¼šå·²ä¸Šçº¿è¿è¥ï¼‰" class="form-input">
          <input type="text" id="project-tech" placeholder="æŠ€æœ¯æ ˆï¼ˆå¦‚ï¼šReactã€TypeScriptã€Three.jsã€Leafletåœ°å›¾å¼•æ“ï¼‰" class="form-input">
          <textarea id="project-highlights" placeholder="æ ¸å¿ƒäº®ç‚¹ï¼ˆå¦‚ï¼šThree.js 3Dåœ°çƒå¯è§†åŒ–ã€äº¤äº’å¼åœ°å›¾å¯¼èˆªã€å“åº”å¼Webè®¾è®¡ï¼‰" class="form-textarea"></textarea>
          <textarea id="project-features" placeholder="å®ç°åŠŸèƒ½ï¼ˆå¦‚ï¼šå®ç°æ ¡å›­ç¤¾å›¢åˆ†äº«ã€åœ°å›¾å®šä½ä¸å¯¼èˆªã€ä¿¡æ¯å¼¹çª—å±•ç¤ºã€ç§»åŠ¨ç«¯é€‚é…ï¼‰" class="form-textarea"></textarea>
          <textarea id="project-results" placeholder="é¡¹ç›®æˆæœï¼ˆå¦‚ï¼šç‹¬ç«‹å¼€å‘éƒ¨ç½²ï¼Œç½‘ç«™å·²ä¸Šçº¿ï¼Œæ—¥å‡è®¿é—®é‡çº¦50äººï¼Œç”¨æˆ·å¹³å‡åœç•™æ—¶é•¿æå‡ï¼Œé¡µé¢åŠ è½½é€Ÿåº¦ä¼˜åŒ–ï¼‰" class="form-textarea"></textarea>
          <span class="tip">ğŸ’¡ ç§‹æ‹›å°è´´å£«ï¼šæˆæœéœ€é‡åŒ–ï¼Œç”¨"æå‡30%""å¤„ç†30å•"ç­‰æ•°æ®ï¼Œé¿å…æ¨¡ç³Šæè¿°</span>
          <button id="add-project" class="btn btn-primary">â• æ·»åŠ é¡¹ç›®</button>
          <div id="project-list" class="project-list"></div>
        </div>
      </div>

      <!-- è£èª‰ä¸è¯ä¹¦æ¨¡å— -->
      <div class="module">
        <h3 class="module-title">ğŸ† è£èª‰ä¸è¯ä¹¦</h3>
        <div class="form-group">
          <textarea id="certificates" placeholder="æŠ€èƒ½è¯ä¹¦ï¼ˆå¦‚ï¼šå·¥ä¸šäº’è”ç½‘å¹³å°å¼€å‘å·¥ç¨‹å¸ˆï¼ˆåˆçº§ï¼‰ã€CET-6ï¼ˆè‹±è¯­å…­çº§ï¼‰ã€æ™®é€šè¯å›½å®¶äºŒçº§ç”²ç­‰è¯ä¹¦ï¼‰" class="form-textarea"></textarea>
          <textarea id="awards" placeholder="è·å¥–ç»å†ï¼ˆå¦‚ï¼šä¸­å›½å¤§å­¦ç”Ÿè®¡ç®—æœºè®¾è®¡å¤§èµ›çœäºŒï¼ˆ2025.5ï¼‰ã€è“æ¡¥æ¯Webåº”ç”¨å¼€å‘å¤§å­¦ç»„ä¸‰ç­‰å¥–ï¼ˆ2024.4ï¼‰ã€å››å·é«˜æ ¡é˜…è¯»æ–‡åŒ–èŠ‚'é˜…è¯»ä¹‹æ˜Ÿ'ï¼ˆè¿ç»­ä¸‰å¹´2023-2025ï¼‰ï¼‰" class="form-textarea"></textarea>
          <textarea id="campus" placeholder="æ ¡å›­ç»å†ï¼ˆå¦‚ï¼šæ‹…ä»»è¥¿åå¤§å­¦å°çƒåä¼šä¼šé•¿ï¼ˆ2024.9-è‡³ä»Šï¼‰ã€è·é™¢çº§ä¸‰å¥½å­¦ç”Ÿï¼ˆ2023.11ï¼‰ã€'ä¸‰ä¸‹ä¹¡'ç¤¾ä¼šå®è·µæ´»åŠ¨ä¼˜ç§€ä¸ªäººå¥–ï¼ˆ2023.12ï¼‰ï¼‰" class="form-textarea"></textarea>
        </div>
      </div>
    </div>

    <!-- å³ä¾§é¢„è§ˆåŒº -->
    <div class="preview">
      <div id="resume-preview" class="resume-preview">
        <!-- é¢„è§ˆå†…å®¹ä¼šé€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    // å…¨å±€æ•°æ®å­˜å‚¨
    let resumeData = {
      basicInfo: {
        name: '',
        job: '',
        education: '',
        courses: '',
        contact: '',
        github: '',
        website: ''
      },
      skills: [],
      projects: [],
      honors: {
        certificates: '',
        awards: '',
        campus: ''
      }
    };

    // DOM å…ƒç´ 
    const elements = {
      // æ™ºèƒ½è§£æ
      smartInput: document.getElementById('smart-input'),
      parseTextBtn: document.getElementById('parse-text'),
      loadDemoBtn: document.getElementById('load-demo'),
      
      // åŸºç¡€ä¿¡æ¯
      name: document.getElementById('name'),
      job: document.getElementById('job'),
      education: document.getElementById('education'),
      courses: document.getElementById('courses'),
      contact: document.getElementById('contact'),
      github: document.getElementById('github'),
      website: document.getElementById('website'),
      
      // æŠ€èƒ½ç›¸å…³
      skillType: document.getElementById('skill-type'),
      skillContent: document.getElementById('skill-content'),
      addSkillBtn: document.getElementById('add-skill'),
      skillList: document.getElementById('skill-list'),
      
      // é¡¹ç›®ç›¸å…³
      projectName: document.getElementById('project-name'),
      projectTime: document.getElementById('project-time'),
      projectLink: document.getElementById('project-link'),
      projectStatus: document.getElementById('project-status'),
      projectTech: document.getElementById('project-tech'),
      projectHighlights: document.getElementById('project-highlights'),
      projectFeatures: document.getElementById('project-features'),
      projectResults: document.getElementById('project-results'),
      addProjectBtn: document.getElementById('add-project'),
      projectList: document.getElementById('project-list'),
      
      // è£èª‰ç›¸å…³
      certificates: document.getElementById('certificates'),
      awards: document.getElementById('awards'),
      campus: document.getElementById('campus'),
      
      // ç‰ˆæœ¬æ§åˆ¶
      versionSelect: document.getElementById('version-select'),
      saveVersionBtn: document.getElementById('save-version'),
      exportPdfBtn: document.getElementById('export-pdf'),
      exportBackupBtn: document.getElementById('export-backup'),
      importBackupBtn: document.getElementById('import-backup-btn'),
      importBackupFile: document.getElementById('import-backup'),
      
      // é¢„è§ˆåŒº
      resumePreview: document.getElementById('resume-preview')
    };

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      initEventListeners();
      loadVersions();
      loadDemoResume(); // é»˜è®¤åŠ è½½ç¤ºä¾‹ç®€å†
    });

    // äº‹ä»¶ç›‘å¬å™¨åˆå§‹åŒ–
    function initEventListeners() {
      // åŸºç¡€ä¿¡æ¯è¾“å…¥ç›‘å¬
      Object.keys(elements).forEach(key => {
        if (elements[key] && elements[key].tagName && (elements[key].tagName === 'INPUT' || elements[key].tagName === 'TEXTAREA')) {
          if (key.includes('project') || key.includes('skill') || key === 'certificates' || key === 'awards' || key === 'campus') {
            return; // è¿™äº›å­—æ®µå•ç‹¬å¤„ç†
          }
          elements[key].addEventListener('input', function() {
            resumeData.basicInfo[key] = this.value;
            updatePreview();
          });
        }
      });
      
      // è£èª‰ä¿¡æ¯ç›‘å¬
      elements.certificates.addEventListener('input', function() {
        resumeData.honors.certificates = this.value;
        updatePreview();
      });
      
      elements.awards.addEventListener('input', function() {
        resumeData.honors.awards = this.value;
        updatePreview();
      });
      
      elements.campus.addEventListener('input', function() {
        resumeData.honors.campus = this.value;
        updatePreview();
      });
      
      // æŠ€èƒ½ç›¸å…³
      elements.addSkillBtn.addEventListener('click', addSkill);
      
      // é¡¹ç›®ç›¸å…³
      elements.addProjectBtn.addEventListener('click', addProject);
      
      // æ™ºèƒ½è§£æ
      elements.parseTextBtn.addEventListener('click', parseSmartInput);
      elements.loadDemoBtn.addEventListener('click', loadDemoResume);
      
      // ç‰ˆæœ¬æ§åˆ¶
      elements.versionSelect.addEventListener('change', loadVersion);
      elements.saveVersionBtn.addEventListener('click', saveVersion);
      elements.exportPdfBtn.addEventListener('click', exportPDF);
      elements.exportBackupBtn.addEventListener('click', exportBackup);
      elements.importBackupBtn.addEventListener('click', () => elements.importBackupFile.click());
      elements.importBackupFile.addEventListener('change', importBackup);
    }

    // æ›´æ–°é¢„è§ˆ
    function updatePreview() {
      const { basicInfo, skills, projects, honors } = resumeData;
      
      let html = '';
      
      // åŸºç¡€ä¿¡æ¯
      if (basicInfo.name || basicInfo.job) {
        html += `<h1 style="display: flex; align-items: center; color: #6aa0f0; margin-bottom: 12px; margin-top: 0;"><span style="margin-right: 10px;">ğŸ‘©â€ğŸ’»</span> ${basicInfo.name || '[å§“å]'} | ${basicInfo.job || '[æ±‚èŒæ„å‘]'}</h1>`;
      }
      
      // åŸºç¡€ä¿¡æ¯è¡¨æ ¼
      if (basicInfo.job || basicInfo.education || basicInfo.courses || basicInfo.contact || basicInfo.github || basicInfo.website) {
        html += `<table style="border-collapse: separate; border-spacing: 0 2px; width: 100%; margin-bottom: 18px; border: none;">`;
        if (basicInfo.job) html += `<tr><td style="padding: 2px 0; font-size: 1em; border: none;"><strong>æ±‚èŒæ„å‘</strong>ï¼š${basicInfo.job}</td></tr>`;
        if (basicInfo.education) html += `<tr><td style="padding: 2px 0; font-size: 1em; border: none;"><strong>æ•™è‚²èƒŒæ™¯</strong>ï¼š${basicInfo.education}</td></tr>`;
        if (basicInfo.courses) html += `<tr><td style="padding: 2px 0; font-size: 1em; border: none;"><strong>ä¸»ä¿®è¯¾ç¨‹</strong>ï¼š${basicInfo.courses}</td></tr>`;
        if (basicInfo.contact) html += `<tr><td style="padding: 2px 0; font-size: 1em; border: none;"><strong>è”ç³»æ–¹å¼</strong>ï¼š${basicInfo.contact}</td></tr>`;
        if (basicInfo.github) html += `<tr><td style="padding: 2px 0; font-size: 1em; border: none;"><strong>Github</strong>ï¼š${basicInfo.github}</td></tr>`;
        if (basicInfo.website) html += `<tr><td style="padding: 2px 0; font-size: 1em; border: none;"><strong>ä¸ªäººç½‘ç«™</strong>ï¼š${basicInfo.website}</td></tr>`;
        html += `</table>`;
      }
      
      // ä¸“ä¸šæŠ€èƒ½
      if (skills.length > 0) {
        html += `<h2 style="display: flex; align-items: center; color: #6aa0f0; margin-bottom: 8px; margin-top: 20px;"><span style="margin-right: 10px;">ğŸ› ï¸</span> ä¸“ä¸šæŠ€èƒ½</h2>`;
        html += `<ul style="margin-top: 3px; margin-bottom: 15px; padding-left: 0; list-style: none;">`;
        skills.forEach(skill => {
          html += `<li style="margin-bottom: 3px;">- <strong>${skill.type}</strong>ï¼š${skill.content}</li>`;
        });
        html += `</ul>`;
      }
      
      // æ ¸å¿ƒé¡¹ç›®ç»éªŒ
      if (projects.length > 0) {
        html += `<h2 style="display: flex; align-items: center; color: #6aa0f0; margin-bottom: 8px; margin-top: 20px;"><span style="margin-right: 10px;">ğŸŒŸ</span> æ ¸å¿ƒé¡¹ç›®ç»éªŒ</h2>`;
        
        projects.forEach((project, index) => {
          const statusText = project.status ? `<span style="font-size: 0.85em; font-weight: normal; margin-left: 8px; color: #666;">ã€${project.status}ã€‘</span>` : '';
          
          html += `<h3 style="margin-top: ${index === 0 ? '8px' : '15px'}; margin-bottom: 3px;"><span style="color: #8aadf4; display: flex; align-items: center;"><span style="margin-right: 8px;">ğŸŒ</span> ${project.name}${statusText}</span></h3>`;
          
          html += `<div style="padding-left: 2em; margin-bottom: 8px;">`;
          
          if (project.time || project.link) {
            html += `<div style="margin-bottom: 4px;"><span style="font-weight: normal; color: #666; font-size: 0.9em;">${project.time}${project.link ? `ï¼ˆ${project.link}ï¼‰` : ''}</span></div>`;
          }
          
          const projectItems = [];
          if (project.tech) projectItems.push(`<strong>æŠ€æœ¯æ ˆ</strong>ï¼š${project.tech}`);
          if (project.highlights) projectItems.push(`<strong>æ ¸å¿ƒäº®ç‚¹</strong>ï¼š${project.highlights}`);
          if (project.features) projectItems.push(`<strong>å®ç°åŠŸèƒ½</strong>ï¼š${project.features}`);
          if (project.results) projectItems.push(`<strong>é¡¹ç›®æˆæœ</strong>ï¼š${project.results}`);
          
          if (projectItems.length > 0) {
            html += `<ul style="margin: 0; padding-left: 0; list-style: none;">`;
            projectItems.forEach(item => {
              html += `<li style="margin-bottom: 2px;">- ${item}</li>`;
            });
            html += `</ul>`;
          }
          
          html += `</div>`;
        });
      }
      
      // è£èª‰ä¸è¯ä¹¦
      if (honors.certificates || honors.awards || honors.campus) {
        html += `<h2 style="display: flex; align-items: center; color: #6aa0f0; margin-bottom: 8px; margin-top: 20px;"><span style="margin-right: 10px;">ğŸ†</span> è£èª‰ä¸è¯ä¹¦</h2>`;
        html += `<div style="padding-left: 1em;">`;
        if (honors.certificates) html += `<p style="margin-bottom: 6px; color: #333; font-size: 0.95em; line-height: 1.4;"><span style="font-weight: 600; color: #333;">æŠ€èƒ½è¯ä¹¦ï¼š</span>${honors.certificates}</p>`;
        if (honors.awards) html += `<p style="margin-bottom: 6px; color: #333; font-size: 0.95em; line-height: 1.4;"><span style="font-weight: 600; color: #333;">è·å¥–ç»å†ï¼š</span>${honors.awards}</p>`;
        if (honors.campus) html += `<p style="margin-bottom: 6px; color: #333; font-size: 0.95em; line-height: 1.4;"><span style="font-weight: 600; color: #333;">æ ¡å›­ç»å†ï¼š</span>${honors.campus}</p>`;
        html += `</div>`;
      }
      
      elements.resumePreview.innerHTML = html;
    }

    // åŠ è½½ç¤ºä¾‹ç®€å†
    function loadDemoResume() {
      resumeData = {
        basicInfo: {
          name: 'Tully',
          job: 'å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ',
          education: 'è¥¿åå¤§å­¦ | ç‰©è”ç½‘å·¥ç¨‹ï¼ˆ2022.09â€”2026.06ï¼‰',
          courses: 'Webå‰/åç«¯å¼€å‘æŠ€æœ¯ã€æ•°æ®ç»“æ„ä¸ç®—æ³•è®¾è®¡ã€è®¡ç®—æœºç½‘ç»œã€æ•°æ®åº“åŸç†ä¸åº”ç”¨',
          contact: '(+86) xxx-xxxx-xxxx | 2332486893@qq.com',
          github: 'https://github.com/Tully-L',
          website: 'https://tully.top/'
        },
        skills: [
          {
            type: 'å‰ç«¯å¼€å‘',
            content: 'ç†Ÿç»ƒæŒæ¡ JavaScriptã€CSS3ã€HTML5ã€TypeScript'
          },
          {
            type: 'å‰ç«¯æ¡†æ¶',
            content: 'å…·å¤‡ Reactã€Vue.js å¼€å‘ç»éªŒ'
          },
          {
            type: 'åç«¯å¼€å‘',
            content: 'å…·å¤‡ Pythonã€Node.jsã€Express å¼€å‘ç»éªŒ'
          },
          {
            type: 'æ•°æ®åº“æŠ€æœ¯',
            content: 'ç†Ÿç»ƒä½¿ç”¨ MySQLã€PostgreSQLã€MongoDB'
          },
          {
            type: 'å¼€å‘å·¥å…·',
            content: 'ç†Ÿç»ƒæ“ä½œ VSCodeã€Gitã€å¾®ä¿¡å¼€å‘è€…å·¥å…·'
          }
        ],
        projects: [
          {
            name: 'äº¤äº’å¼æ ¡å›­ä¿¡æ¯å±•ç¤ºç½‘ç«™',
            time: '2025.07-2025.07',
            link: 'https://greenpulsemap.com/',
            status: 'å·²ä¸Šçº¿è¿è¥',
            tech: 'Reactã€TypeScriptã€Three.jsã€Leafletåœ°å›¾å¼•æ“',
            highlights: 'Three.js 3Dåœ°çƒå¯è§†åŒ–ã€äº¤äº’å¼åœ°å›¾å¯¼èˆªã€å“åº”å¼Webè®¾è®¡',
            features: 'å®ç°æ ¡å›­ç¤¾å›¢åˆ†äº«ã€åœ°å›¾å®šä½ä¸å¯¼èˆªã€ä¿¡æ¯å¼¹çª—å±•ç¤ºã€ç§»åŠ¨ç«¯é€‚é…',
            results: 'ç‹¬ç«‹å¼€å‘éƒ¨ç½²ï¼Œç½‘ç«™å·²ä¸Šçº¿ï¼Œæ—¥å‡è®¿é—®é‡çº¦50äººï¼Œç”¨æˆ·å¹³å‡åœç•™æ—¶é•¿æå‡ï¼Œé¡µé¢åŠ è½½é€Ÿåº¦ä¼˜åŒ–'
          },
          {
            name: 'ç½‘çƒçƒ­èµ›äº‹ç®¡ç†å°ç¨‹åº',
            time: '2025.08-2024.08',
            link: '',
            status: 'ä¸Šçº¿æµ‹è¯•ä¸­',
            tech: 'å¾®ä¿¡å°ç¨‹åºã€Node.jsã€Express.jsã€MongoDB',
            highlights: 'Socket.ioå®æ—¶æ¯”åˆ†åŒæ­¥ã€å…¨æ ˆå¼€å‘ã€èµ›äº‹å…¨æµç¨‹ç®¡ç†',
            features: 'èµ›äº‹æŠ¥åã€èµ›ç¨‹ç®¡ç†ã€å®æ—¶æ¯”åˆ†æ¨é€ã€é€‰æ‰‹ä¿¡æ¯ç®¡ç†ã€åå°å®¡æ ¸',
            results: 'ç‹¬ç«‹å¼€å‘å¹¶ä¸Šçº¿æµ‹è¯•ï¼ˆå¾®ä¿¡æœç´¢"ç½‘çƒçƒ­"ï¼‰ï¼Œèµ›äº‹ç®¡ç†æ•ˆç‡æå‡ï¼Œæ”¯æŒæ—¥å‡10åœºèµ›äº‹ï¼Œç”¨æˆ·åé¦ˆè‰¯å¥½'
          },
          {
            name: 'å­¦ç”Ÿç§¯åˆ†ç®¡ç†å°ç¨‹åº',
            time: '2025.07-2024.08',
            link: '',
            status: 'å…¨æ ˆå¼€å‘',
            tech: 'å¾®ä¿¡å°ç¨‹åºã€Node.jsã€Express.jsã€MongoDB',
            highlights: 'å¤šåª’ä½“ä½œä¸šç®¡ç†ã€åŒè§’è‰²æƒé™æ§åˆ¶ã€ç§¯åˆ†ç»Ÿè®¡ç³»ç»Ÿ',
            features: 'ä½œä¸šä¸Šä¼ ä¸æ‰¹æ”¹ã€ç§¯åˆ†è‡ªåŠ¨ç»Ÿè®¡ã€æ•™å¸ˆ/å­¦ç”ŸåŒç«¯æƒé™ã€ç§¯åˆ†æ’è¡Œæ¦œ',
            results: 'ç‹¬ç«‹å®Œæˆå…¨æ ˆå¼€å‘ï¼Œæµ‹è¯•å¤„ç†ä½œä¸šçº¦30ä»½ï¼Œå®¡æ ¸æ•ˆç‡æå‡ï¼Œæ•™å¸ˆç«¯æ“ä½œæ›´ä¾¿æ·'
          }
        ],
        honors: {
          certificates: 'å·¥ä¸šäº’è”ç½‘å¹³å°å¼€å‘å·¥ç¨‹å¸ˆï¼ˆåˆçº§ï¼‰ã€CET-6ï¼ˆè‹±è¯­å…­çº§ï¼‰ã€æ™®é€šè¯å›½å®¶äºŒçº§ç”²ç­‰è¯ä¹¦',
          awards: 'ä¸­å›½å¤§å­¦ç”Ÿè®¡ç®—æœºè®¾è®¡å¤§èµ›çœäºŒï¼ˆ2025.5ï¼‰ã€è“æ¡¥æ¯Webåº”ç”¨å¼€å‘å¤§å­¦ç»„ä¸‰ç­‰å¥–ï¼ˆ2024.4ï¼‰ã€å››å·é«˜æ ¡é˜…è¯»æ–‡åŒ–èŠ‚"é˜…è¯»ä¹‹æ˜Ÿ"ï¼ˆè¿ç»­ä¸‰å¹´2023-2025ï¼‰',
          campus: 'æ‹…ä»»è¥¿åå¤§å­¦å°çƒåä¼šä¼šé•¿ï¼ˆ2024.9-è‡³ä»Šï¼‰ã€è·é™¢çº§ä¸‰å¥½å­¦ç”Ÿï¼ˆ2023.11ï¼‰ã€"ä¸‰ä¸‹ä¹¡"ç¤¾ä¼šå®è·µæ´»åŠ¨ä¼˜ç§€ä¸ªäººå¥–ï¼ˆ2023.12ï¼‰'
        }
      };
      
      updateFormFields();
      renderSkills();
      renderProjects();
      updatePreview();
    }

    // æ›´æ–°è¡¨å•å­—æ®µ
    function updateFormFields() {
      Object.keys(resumeData.basicInfo).forEach(key => {
        if (elements[key]) {
          elements[key].value = resumeData.basicInfo[key] || '';
        }
      });
      
      elements.certificates.value = resumeData.honors.certificates || '';
      elements.awards.value = resumeData.honors.awards || '';
      elements.campus.value = resumeData.honors.campus || '';
    }

    // æ·»åŠ æŠ€èƒ½
    function addSkill() {
      const type = elements.skillType.value.trim();
      const content = elements.skillContent.value.trim();
      
      if (!type || !content) {
        alert('è¯·å¡«å†™æŠ€èƒ½ç±»åˆ«å’Œå†…å®¹');
        return;
      }
      
      const skill = { type, content };
      resumeData.skills.push(skill);
      
      // æ¸…ç©ºè¾“å…¥æ¡†
      elements.skillType.value = '';
      elements.skillContent.value = '';
      
      renderSkills();
      updatePreview();
    }

    // æ¸²æŸ“æŠ€èƒ½åˆ—è¡¨
    function renderSkills() {
      elements.skillList.innerHTML = resumeData.skills.map((skill, index) => `
        <div class="skill-item">
          <div class="skill-content">
            <div class="skill-type">${skill.type}</div>
            <div class="skill-details">${skill.content}</div>
          </div>
          <button class="delete-btn" onclick="deleteSkill(${index})">åˆ é™¤</button>
        </div>
      `).join('');
    }

    // åˆ é™¤æŠ€èƒ½
    window.deleteSkill = function(index) {
      resumeData.skills.splice(index, 1);
      renderSkills();
      updatePreview();
    };

    // æ·»åŠ é¡¹ç›®
    function addProject() {
      const project = {
        name: elements.projectName.value.trim(),
        time: elements.projectTime.value.trim(),
        link: elements.projectLink.value.trim(),
        status: elements.projectStatus.value.trim(),
        tech: elements.projectTech.value.trim(),
        highlights: elements.projectHighlights.value.trim(),
        features: elements.projectFeatures.value.trim(),
        results: elements.projectResults.value.trim()
      };
      
      if (!project.name) {
        alert('è¯·è‡³å°‘å¡«å†™é¡¹ç›®åç§°');
        return;
      }
      
      resumeData.projects.push(project);
      
      // æ¸…ç©ºè¾“å…¥æ¡†
      elements.projectName.value = '';
      elements.projectTime.value = '';
      elements.projectLink.value = '';
      elements.projectStatus.value = '';
      elements.projectTech.value = '';
      elements.projectHighlights.value = '';
      elements.projectFeatures.value = '';
      elements.projectResults.value = '';
      
      renderProjects();
      updatePreview();
    }

    // æ¸²æŸ“é¡¹ç›®åˆ—è¡¨
    function renderProjects() {
      elements.projectList.innerHTML = resumeData.projects.map((project, index) => `
        <div class="project-item">
          <div class="project-header">
            <div class="project-title">${project.name}</div>
            <button class="delete-btn" onclick="deleteProject(${index})">åˆ é™¤</button>
          </div>
          <div class="project-details">
            <div><strong>æ—¶é—´ï¼š</strong>${project.time}</div>
            <div><strong>é“¾æ¥ï¼š</strong>${project.link}</div>
            <div><strong>çŠ¶æ€ï¼š</strong>${project.status}</div>
            <div><strong>æŠ€æœ¯æ ˆï¼š</strong>${project.tech}</div>
          </div>
        </div>
      `).join('');
    }

    // åˆ é™¤é¡¹ç›®
    window.deleteProject = function(index) {
      resumeData.projects.splice(index, 1);
      renderProjects();
      updatePreview();
    };

    // æ™ºèƒ½è§£æåŠŸèƒ½
    function parseSmartInput() {
      const text = elements.smartInput.value.trim();
      if (!text) {
        alert('è¯·è¾“å…¥è¦è§£æçš„æ–‡æœ¬');
        return;
      }
      
      // æ¸…ç©ºå½“å‰æ•°æ®
      resumeData = {
        basicInfo: {
          name: '',
          job: '',
          education: '',
          courses: '',
          contact: '',
          github: '',
          website: ''
        },
        skills: [],
        projects: [],
        honors: {
          certificates: '',
          awards: '',
          campus: ''
        }
      };
      
      // è§£æåŸºç¡€ä¿¡æ¯
      parseBasicInfo(text);
      
      // è§£ææŠ€èƒ½
      parseSkills(text);
      
      // è§£æé¡¹ç›®
      parseProjects(text);
      
      // è§£æè£èª‰
      parseHonors(text);
      
      // æ›´æ–°ç•Œé¢
      updateFormFields();
      renderSkills();
      renderProjects();
      updatePreview();
      
      alert('è§£æå®Œæˆï¼è¯·æ£€æŸ¥å¹¶å®Œå–„ä¿¡æ¯');
    }

    // è§£æåŸºç¡€ä¿¡æ¯
    function parseBasicInfo(text) {
      // å§“åè§£æ
      const nameMatch = text.match(/^([^\s,ï¼Œã€‚]+)/);
      if (nameMatch) {
        resumeData.basicInfo.name = nameMatch[1];
      }
      
      // æ±‚èŒæ„å‘
      const jobPatterns = [
        /æ±‚èŒæ„å‘[ï¼š:]\s*([^\n,ï¼Œã€‚]+)/,
        /æ„å‘[ï¼š:]\s*([^\n,ï¼Œã€‚]+)/,
        /(å‰ç«¯|åç«¯|å…¨æ ˆ|æµ‹è¯•|äº§å“|è®¾è®¡|è¿è¥|æ•°æ®|ç®—æ³•|ç§»åŠ¨ç«¯|Android|iOS|Java|Python|Go|PHP|C\+\+|\.NET).*?(å·¥ç¨‹å¸ˆ|å¼€å‘|ç¨‹åºå‘˜|ä¸“å‘˜|ç»ç†|å®ä¹ ç”Ÿ)/g
      ];
      
      for (const pattern of jobPatterns) {
        const match = text.match(pattern);
        if (match) {
          resumeData.basicInfo.job = match[1] || match[0];
          break;
        }
      }
      
      // æ•™è‚²èƒŒæ™¯
      const educationPatterns = [
        /æ•™è‚²èƒŒæ™¯[ï¼š:]\s*([^\n]+)/,
        /å­¦å†[ï¼š:]\s*([^\n]+)/,
        /([\u4e00-\u9fa5]+å¤§å­¦|[\u4e00-\u9fa5]+å­¦é™¢).*?(ä¸“ä¸š|å­¦å£«|ç¡•å£«|åšå£«|æœ¬ç§‘|ç ”ç©¶ç”Ÿ)/
      ];
      
      for (const pattern of educationPatterns) {
        const match = text.match(pattern);
        if (match) {
          resumeData.basicInfo.education = match[1] || match[0];
          break;
        }
      }
      
      // è”ç³»æ–¹å¼
      const phoneMatch = text.match(/1[3-9]\d{9}|\(\+86\)\s*1[3-9]\d{9}|1[3-9]\d-\d{4}-\d{4}/);
      const emailMatch = text.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/);
      
      if (phoneMatch || emailMatch) {
        let contact = '';
        if (phoneMatch) contact += phoneMatch[0];
        if (emailMatch) contact += (contact ? ' | ' : '') + emailMatch[0];
        resumeData.basicInfo.contact = contact;
      }
      
      // GitHub
      const githubMatch = text.match(/github\.com\/[a-zA-Z0-9-_]+|https?:\/\/github\.com\/[a-zA-Z0-9-_]+/);
      if (githubMatch) {
        resumeData.basicInfo.github = githubMatch[0].startsWith('http') ? githubMatch[0] : 'https://' + githubMatch[0];
      }
      
      // ä¸ªäººç½‘ç«™
      const websiteMatch = text.match(/https?:\/\/[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(?:\/[^\s]*)?/g);
      if (websiteMatch) {
        const website = websiteMatch.find(url => !url.includes('github.com'));
        if (website) {
          resumeData.basicInfo.website = website;
        }
      }
    }

    // è§£ææŠ€èƒ½
    function parseSkills(text) {
      const skillPatterns = [
        /æŠ€èƒ½[ï¼š:]\s*([^\n]+)/,
        /ä¸“ä¸šæŠ€èƒ½[ï¼š:]\s*([^\n]+)/,
        /æŒæ¡æŠ€èƒ½[ï¼š:]\s*([^\n]+)/,
        /æŠ€æœ¯æ ˆ[ï¼š:]\s*([^\n]+)/
      ];
      
      for (const pattern of skillPatterns) {
        const match = text.match(pattern);
        if (match) {
          const skillText = match[1];
          const skills = skillText.split(/[,ï¼Œã€ï¼›;]/).map(s => s.trim()).filter(s => s);
          
          // æŒ‰æŠ€æœ¯ç±»å‹åˆ†ç±»
          const categories = {
            'å‰ç«¯å¼€å‘': ['JavaScript', 'TypeScript', 'React', 'Vue', 'Angular', 'HTML', 'CSS', 'SCSS', 'Less', 'jQuery', 'Bootstrap', 'Tailwind'],
            'åç«¯å¼€å‘': ['Node.js', 'Java', 'Python', 'Go', 'PHP', 'C#', 'C++', 'Spring', 'Express', 'Django', 'Flask'],
            'æ•°æ®åº“': ['MySQL', 'PostgreSQL', 'MongoDB', 'Redis', 'SQLite', 'Oracle'],
            'å·¥å…·/å…¶ä»–': ['Git', 'Docker', 'Webpack', 'Vite', 'Linux', 'AWS', 'Nginx']
          };
          
          const categorizedSkills = {};
          
          skills.forEach(skill => {
            let category = 'å…¶ä»–æŠ€èƒ½';
            for (const [cat, keywords] of Object.entries(categories)) {
              if (keywords.some(keyword => skill.toLowerCase().includes(keyword.toLowerCase()))) {
                category = cat;
                break;
              }
            }
            
            if (!categorizedSkills[category]) {
              categorizedSkills[category] = [];
            }
            categorizedSkills[category].push(skill);
          });
          
          // æ·»åŠ åˆ°æŠ€èƒ½åˆ—è¡¨
          Object.entries(categorizedSkills).forEach(([type, content]) => {
            resumeData.skills.push({
              type,
              content: content.join('ã€')
            });
          });
          
          break;
        }
      }
    }

    // è§£æé¡¹ç›®
    function parseProjects(text) {
      // æŸ¥æ‰¾é¡¹ç›®éƒ¨åˆ†
      const projectSections = text.split(/é¡¹ç›®ç»éªŒ[ï¼š:]?|é¡¹ç›®[ï¼š:]?|ä½œå“[ï¼š:]?/).slice(1);
      
      projectSections.forEach(section => {
        const lines = section.split('\n').filter(line => line.trim());
        let currentProject = null;
        
        lines.forEach(line => {
          line = line.trim();
          if (!line) return;
          
          // é¡¹ç›®æ ‡é¢˜
          const projectTitleMatch = line.match(/^\d+\.\s*(.+)|^[-â€¢]\s*(.+)|^([^\-â€¢\d][^ï¼š:]+)(?:\s*\(([^)]+)\))?/);
          if (projectTitleMatch && !line.includes('ï¼š') && !line.includes(':')) {
            if (currentProject) {
              resumeData.projects.push(currentProject);
            }
            
            const name = projectTitleMatch[1] || projectTitleMatch[2] || projectTitleMatch[3];
            const time = projectTitleMatch[4] || '';
            
            currentProject = {
              name: name.trim(),
              time: time.trim(),
              link: '',
              status: '',
              tech: '',
              highlights: '',
              features: '',
              results: ''
            };
          } else if (currentProject) {
            // è§£æé¡¹ç›®è¯¦æƒ…
            if (line.includes('æŠ€æœ¯æ ˆ') || line.includes('æŠ€æœ¯')) {
              currentProject.tech = line.replace(/.*?[ï¼š:]/, '').trim();
            } else if (line.includes('åŠŸèƒ½') || line.includes('å®ç°')) {
              currentProject.features = line.replace(/.*?[ï¼š:]/, '').trim();
            } else if (line.includes('æˆæœ') || line.includes('æ•ˆæœ') || line.includes('ç»“æœ')) {
              currentProject.results = line.replace(/.*?[ï¼š:]/, '').trim();
            } else if (line.includes('äº®ç‚¹') || line.includes('ç‰¹è‰²')) {
              currentProject.highlights = line.replace(/.*?[ï¼š:]/, '').trim();
            } else if (line.includes('http')) {
              currentProject.link = line.match(/https?:\/\/[^\s]+/)?.[0] || '';
            } else if (line.includes('ä¸Šçº¿') || line.includes('è¿è¥') || line.includes('å®Œæˆ')) {
              currentProject.status = line.replace(/.*?[ï¼š:]/, '').trim();
            }
          }
        });
        
        if (currentProject) {
          resumeData.projects.push(currentProject);
        }
      });
    }

    // è§£æè£èª‰
    function parseHonors(text) {
      const honorPatterns = [
        { key: 'certificates', patterns: [/è¯ä¹¦[ï¼š:]\s*([^\n]+)/, /æŠ€èƒ½è¯ä¹¦[ï¼š:]\s*([^\n]+)/, /(CET-\d|å››å…­çº§|è‹±è¯­|æ™®é€šè¯|è®¡ç®—æœº|å·¥ç¨‹å¸ˆ).*?è¯ä¹¦?/g] },
        { key: 'awards', patterns: [/è·å¥–[ï¼š:]\s*([^\n]+)/, /å¥–é¡¹[ï¼š:]\s*([^\n]+)/, /è£èª‰[ï¼š:]\s*([^\n]+)/, /(å¤§èµ›|ç«èµ›|æ¯”èµ›).*?(ä¸€ç­‰å¥–|äºŒç­‰å¥–|ä¸‰ç­‰å¥–|ç‰¹ç­‰å¥–|é‡‘å¥–|é“¶å¥–|é“œå¥–)/g] },
        { key: 'campus', patterns: [/æ ¡å›­ç»å†[ï¼š:]\s*([^\n]+)/, /å­¦ç”Ÿå·¥ä½œ[ï¼š:]\s*([^\n]+)/, /(ä¼šé•¿|éƒ¨é•¿|ä¸»å¸­|å§”å‘˜|å¹²éƒ¨|ç¤¾å›¢|å­¦ç”Ÿä¼š)/g] }
      ];
      
      honorPatterns.forEach(({ key, patterns }) => {
        for (const pattern of patterns) {
          const matches = text.match(pattern);
          if (matches) {
            if (pattern.flags && pattern.flags.includes('g')) {
              resumeData.honors[key] = matches.join('ã€');
            } else {
              resumeData.honors[key] = matches[1] || matches[0];
            }
            break;
          }
        }
      });
    }

    // ç‰ˆæœ¬ç®¡ç†
    function saveVersion() {
      const versionName = prompt("è¯·è¾“å…¥ç‰ˆæœ¬åç§°ï¼ˆå¦‚ï¼šå‰ç«¯-å­—èŠ‚ï¼‰");
      if (!versionName) return;
      
      const currentSize = JSON.stringify(localStorage).length;
      if (currentSize > 4.5 * 1024 * 1024) {
        alert("æœ¬åœ°å­˜å‚¨å³å°†æ»¡ï¼Œè¯·å…ˆå¯¼å‡ºå¤‡ä»½å¹¶åˆ é™¤æ— ç”¨ç‰ˆæœ¬ï¼");
        return;
      }
      
      const versionKey = `resume_${versionName}_${Date.now()}`;
      localStorage.setItem(versionKey, JSON.stringify(resumeData));
      
      loadVersions();
      alert(`ç‰ˆæœ¬"${versionName}"ä¿å­˜æˆåŠŸï¼`);
    }

    function loadVersions() {
      const versions = [];
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('resume_')) {
          const parts = key.split('_');
          const timestamp = parseInt(parts[parts.length - 1]);
          const name = parts.slice(1, -1).join('_');
          versions.push({ key, name, timestamp });
        }
      }
      
      versions.sort((a, b) => b.timestamp - a.timestamp);
      
      elements.versionSelect.innerHTML = '<option value="">é€‰æ‹©ç‰ˆæœ¬</option>' +
        versions.map(v => `<option value="${v.key}">${v.name} (${new Date(v.timestamp).toLocaleString()})</option>`).join('');
    }

    function loadVersion() {
      const versionKey = elements.versionSelect.value;
      if (!versionKey) return;
      
      const data = localStorage.getItem(versionKey);
      if (data) {
        resumeData = JSON.parse(data);
        
        updateFormFields();
        renderSkills();
        renderProjects();
        updatePreview();
      }
    }

    // PDFå¯¼å‡º
    function exportPDF() {
      const previewDom = elements.resumePreview;
      const filename = resumeData.basicInfo.name ? 
        `${resumeData.basicInfo.name}_${resumeData.basicInfo.job || 'ç®€å†'}.pdf` : 
        'æˆ‘çš„ç®€å†.pdf';
      
      const opt = {
        margin: 10,
        filename: filename,
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };
      
      html2pdf().set(opt).from(previewDom).save();
    }

    // å¤‡ä»½å¯¼å‡º
    function exportBackup() {
      const allVersions = {};
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key.startsWith('resume_')) {
          allVersions[key] = JSON.parse(localStorage.getItem(key));
        }
      }
      
      const dataStr = JSON.stringify(allVersions, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      
      const link = document.createElement('a');
      link.href = URL.createObjectURL(dataBlob);
      link.download = 'resume_backup.json';
      link.click();
    }

    // å¤‡ä»½å¯¼å…¥
    function importBackup(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const backupData = JSON.parse(e.target.result);
          
          Object.keys(backupData).forEach(key => {
            localStorage.setItem(key, JSON.stringify(backupData[key]));
          });
          
          loadVersions();
          alert('å¤‡ä»½å¯¼å…¥æˆåŠŸï¼');
        } catch (error) {
          alert('å¤‡ä»½æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼');
        }
      };
      reader.readAsText(file);
    }
  </script>
</body>
</html>